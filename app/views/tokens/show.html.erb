<h1><%= @token.name -%></h1>

<% if flash[:error] %>
  <div style="color:red;border-color:red;border-size:1px;padding:1em;">
    <%=h flash[:error] %>
  </div>
<% end %>

<%= form_for @token do |f| %>
  <% if @token.claimant.blank? %>
    <p><%= f.label :claimant, 'Your Name:' -%>
    <%= f.text_field :claimant -%>
    <%= f.hidden_field :lock_version -%>
    <%= submit_tag 'Claim Token' -%></p>
  <% else %>
    <p>Token has been claimed by <%= @token.claimant -%> for about <%= time_ago_in_words(@token.updated_at) -%>.
    <%= f.hidden_field :claimant, :value => '' -%>
    <%= f.hidden_field :lock_version -%>
    <%= submit_tag 'Release Token' -%></p>
  <% end %>
<% end %>
